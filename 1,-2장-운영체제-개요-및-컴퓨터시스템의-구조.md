# Chapter 1. 서론

## Chapter 1 Outline

1. 운영체제의 정의

2. 컴퓨터 시스템의 구성

3. 컴퓨터 시스템의 아키텍쳐

4. 운영체제의 구조 :  멀티프로그래밍, 가상메모리, 스케줄링 등

5. 운영체제에서 수행하는 연산과 커널모드 ,유저모드에 대해



## 1.1 운영체제가  할 일

### 🔸운영체제의 역할

- **컴퓨터 하드웨어를 관리**함 
  - 컴퓨터 하드웨어에는 CPU, Main Memory, Storage, I/O devices 가 있다. 

- **프로그램 수행을 제어**함
  - 스케쥴링과 오류 보고

### 🔸운영체제의 위치

- ![image-20210707184023584](C:\Users\User\AppData\Roaming\Typora\typora-user-images\image-20210707184023584.png) 
- 위의 이미지를 보면, 사용자들은 **애플리케이션 프로그램**과 **시스템 프로그램**을 통해서 **HW**에 접근하고 있다.  
- 운영체제는 HW와 애플리케이션 프로그램의 사이에 위치하여
  - **컴퓨터 하드웨어를 관리**하고 
  - 응용프로그램이 컴퓨터에 효과적으로 접근할 수 있도록 돕는다.

### 🔸운영체제의 목표

- 유저 프로그램을 실행하고 사용자 문제를 쉽게 해결한다. 
- 컴퓨터 시스템을 편리하게 사용할 수 있도록 한다. 
- 컴퓨터 하드웨어를 효율적으로 사용한다.

### 1.1.2 시스템 관점에서 본 운영체제의 역할

- **자원 할당자**(resource allocator)

  모든 리소스를 관리한다. (CPU 시간, 메모리 공간, 파일 저장 공간, I/O 장치)

  효율적이고 공정한 리소스 사용을 위해 충돌하는 요청에 리소스를 할당하는 방법을 결정한다. 

- **제어 프로그램**(control program)

  컴퓨터 시스템의 오류 및 부적절한 사용을 방지하기 위해 프로그램 실행을 제어한다. 

### 1.1.3 운영체제의 정의

- 운영체제는 컴퓨터에서 항상 실행되는 프로그램이다. (일반적으로 커널이라고 함)

  커널 외 프로그램에는 시스템 프로그램과 응용 프로그램이 있다.

  - 응용 프로그램 : 사용자 목적에 맞춰서 수행되는 게임, 워드프로세서 같은 응용프로그램을 의미. (application program)


   ## 1.2 컴퓨터 시스템 구성(Computer-System Organization)

   - "OS is a resource manager"
   - ![image-20210707185649350](C:\Users\User\AppData\Roaming\Typora\typora-user-images\image-20210707185649350.png)
   - 컴퓨터 시스템은 크게 4가지로 구성된다. (CPU, Storage, Memory, I/O devices)
   - 공유 메모리에 대한 액세스를 제공하는 공통 버스를 통해 하나 이상의 CPU 및 장치 컨트롤러가 연결된다.
   - 하나 또는 그 이상의 장치 컨트롤러들이 메모리를 통해서 서로간에 인터랙션을 하고 있다.
   - 예시
     -  프로그램을 수행하기 위해서는 프로그램이 디스크로부터 읽어들여서 메인 메모리에 반드시 저장되어야 한다.
     -  키보드로부터 읽혀진 데이터들은 메모리에 저장되어 cpu가 이를 해석해서 수행해야한다.
   - 즉, 컴퓨터 시스템은 CPU 또는 디바이스들이 메모리 사이클을 차지하기 위해서 서로 경쟁한다.

   ### 🔸컴퓨터 시스템의 작동방식

   - 네 가지 주요 원칙

### 1.2.0 Computer system I/O operation

- IO연산이란 데이터가 메인메모리에서부터 장치 컨트롤러, 또는 장치 컨트롤러에서 메인메모리로 이동하는 연산이다.

- 각 장치 컨트롤러는 특정 유형의 장치를 담당한다.

  - 각 장치 컨트롤러에는 로컬 버퍼가 있다. 

- I/O: 데이터가 로컬 버퍼에서 메인 메모리로 이동된다.

- 장치와 CPU가 동시에 실행될 수 있다.

  - 어떻게? **DMA**(Direct Memory Access) 

    - DMA란 ? 디바이스가 어떠한 간섭 없이 IO 트랜잭션을 할 수 있는 프로세스를 말한다.

      요청이 필요할 때 CPU는 명령을 알려준다.

      그 후부터는 IO가 간섭 없이 이루어지므로 그 사이에 CPU는 유용한 일, 즉 프로그램 수행을 할 수 있다.

- 장치 컨트롤러는 인터럽트를 발생시켜 작업이 완료되었음을 CPU에 알린다.

### 1.2.1 인터럽트(Interrupt)

- DMA덕분에 IO트랜젝션와 CPU의 프로그램 수행이 병렬적으로 수행 가능하다. 

  IO트랜젝션이 끝났을 때 CPU가 알려줘야 되는데, 그 때 사용되는 메카니즘이 인터럽트이다.

- ![image-20210707194323661](C:\Users\User\AppData\Roaming\Typora\typora-user-images\image-20210707194323661.png)

- 인터럽트 과정

  - 디바이스 드라이버가 IO를 인식한다. 
  - IO컨트롤러에서 트랜잭션이 일어나고, 그 사이에 CPU가 다른 유용한 IO트랜젝션을 완료하게 되면 인터럽트를 통해 CPU에게 알려준다. 
  - CPU는 인터럽트를 받자마자 무조건적으로 현재 수행중이던 인스트럭션을 멈추고 그 인터럽트에 해당하는 인터럽트 핸들러를 사용하게 되어있다.
  - 인터럽트 서비스 루틴이 끝나면, 수행이 멈추었을 때 인스트럭션의 주소를 인터럽트 벡터에 저장해놨기 때문에 해당 위치에서부터 재수행이 가능하게 되어있다.

- 인터럽트와 트랩의 차이

  - 트랩 : SW에서 발생되는 인터럽트. synchronous. 예) 익셉션.

  - 인터럽트 : 외부 디바이스에서 발생되는 인터럽트. asynchronous.

    예) 세그먼트, 시스템 콜(os에게 서비스를 요청하는 메커니즘)

### 1.2.2 저장장치 구조(Storage structure)

- **메인메모리**는 CPU가 직접적으로 접근할 수 있는 유일한 스토리지인 매개체다.

  따라서 프로그램을 수행하기 위해서는 디스크에서 바로 수행하지 않고 반드시 메인 메모리로 로딩을 해야한다.

- 보조기억장치(Seconedary Storage)는 데이터를 영구적으로 저장할 수 있는 매체이고, 전원을 끄더라도 데이터가 사라지지 않는 비휘발성이다.

  에전에는 마그네틱 디스크가 많이 사용되었지만 최근에는 가격대비 성능이 크게 향상되고 있는 SSD와 같은 메모리를 많이 사용한다.

   - 추가적인 특징 : Multi-processor systems

### 1.2.3 입출력 구조(I/O structure)

- I/O 연산은 **버스**를 통해 수행된다.

  - 버스는 주소, 데이터 및 제어 신호를 전달하는 pararrel wires의 모음이다.

  - 버스는 크게 **시스템 버스**와 **메모리 버스**로 구분이 된다.
    - **시스템 버스**는 CPU와 IO브릿지를 연결한다.
    - 시스템 버스는 주요 구성요소 사이의 주요 통신 경로이다. 
    - 하드웨어는 어느 순간이든 시스템 버스를 통해 CPU에 신호를 보내 인터럽트를 발생시킬 수 있다.)
    - **메모리 버스**는 IO브릿지와 메모리를 연결한다.

   ## 1.3 컴퓨터 시스템 구조(Computer-System Architecture)

- 컴퓨터 시스템 구성요소의 정의
  - CPU : 명령을 실행하는 하드웨어
  - 프로세서 : 하나 이상의 CPU를 포함하는 물리적 칩
  - 코어 : CPU의 기본 계산 단위
  - 다중 코어(multicore) : 동일한 CPU에 여러 컴퓨팅 코어를 포함함
  - 다중 처리기(multiprocessor) : 여러 프로세서를 포함함

사실상 거의 모든 시스템은 이제 다중 코어이지만, 컴퓨터 시스템의 단일 계산 단위를 가리킬 때는 일반적인 용어인 CPU를 사용함

하나의 CPU에 존재하는 하나 이상의 코어를 구체적으로 언급할 때 코어와 다중 코어 용어를 사용한다. 

### 1.3.2 다중 처리기 시스템(Multiprocessor Systems)

- 정의 : 여러개의 컴퓨팅 코어가 단일 칩에 상주하는 다중 코어 시스템을 포함한다. 

가장 일반적인 다중 처리기 시스템은 각 피어 CPU 프로세서가 운영체제 기능 및 사용자 프로세스를 포함한 모든 작업을 수행하는 SMP(symmetric multiprocessing)을 사용한다. 

   ## 1.4  운영체제의 작동(Operating-System Operations)



   ## 1.5  보안과 보호

   ## 1.6 가상화

   ## 1.7 분산 시스템

   ## 1.8 커널 자료구조

   ## 1.9  계산 환경

   ## 1.10 무료 및 공개 소스 운영체제

   ## 1.11 요약

   

   ### Chapter 2. 운영체제 구조

   1. 운영체제 서비스
   2. 사용자와 운영체제 인터페이스
   3. 시스템 콜
   4. 시스템 서비스
   5. 링커와 로더
   6. 응용 프로그램이 운영체제마다 다른 이유
   7. 운영체제 설계 및 구현
   8. 운영체제 구조
   9. 운영체제 빌딩과 부팅
   10. 운영체제 디버깅
   11. 요약
